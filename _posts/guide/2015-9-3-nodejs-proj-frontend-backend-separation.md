---
layout: post
title: "nodejs项目前后端分离的思考" 
categories: 规范
tags: guide nodejs tech 
---

## Q问题
以往开发MVC模式的web项目, 往往采用前端写demo页面, 完成之后提交给后端, 然后由后端翻译成模板添加数据. 这种模式下如果遇到需求变更或者页面bug的话, 往往需要前后端开发人员重复修改同一个部分, 增加大量重复工作和沟通成本. 因此, 在引入了nodejs这种前后端通用的开发技术之后, 如何实现高效, 合理的前后端分离呢?

## A方案
在引入nodejs之后, 前端开发人员也可以利用express搭建一个基础的web项目框架, 基于约定的页面路径直接在MVC的View层开发模板. 而后端开发人员只需要负责Model层的设计以及向前端提供数据. 这里的核心是前端也会涉及到页面Controller层, 需要负责使用模拟数据渲染页面模板.

![separate demo](/assets/img/front_back_separate.png)

####  搭建基本的项目框架

在项目开始编码前, 按照项目原型的要求规划好所有页面的路径和API接口, 前后端共同讨论确定每个接口所需的数据及其格式.
然后基于约定创建基本的nodejs项目框架, 确定路由规则及Controller方法. 将项目托管到git平台上, 前后端人员从主开发分支上分别拉取独立的分支进行开发, 按照约定将开发结果合并到主开发分支供其他人测试.

#### 前端工作

前端主要负责使用选定的模板(jade, ejs, swig…)还原设计稿, 同时用js写动作和交互. 同时, 前端人员可以编辑Controller方法, 构造简单地测试数据进行渲染, 测试页面效果, 待后端人员获取实际数据的方法之后, 再和后端对接.

#### 后端工作

后端人员主要处理Model的创建和提供业务逻辑接口, 需要将每个功能的业务逻辑从Controller层抽离出来, 做成独立的Service供Controller调用. 再前端完成模板开发之后与之对接.
